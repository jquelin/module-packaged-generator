#!/usr/bin/perl

use strict;
use warnings;

use File::Spec::Functions qw{ catdir updir };

# for dev purposes
use FindBin qw{ $Bin };
use lib catdir( $Bin, updir, 'lib' );

use Module::Packaged::Generator;

# -- main program

# try to find a suitable driver
my $driver = Module::Packaged::Generator->find_driver;
if ( not defined $driver ) {
    my $msg = join "\n",
        "no driver found for this machine distribution.\n",
        "list of existing distribution drivers:",
        map { ( my $d = $_ ) =~ s/^.*:://; "\t$d" }
        Module::Packaged::Generator->all_drivers;
    die "$msg\n\n";
}
print "found a distribution driver: $driver\n";


# create the database
( my $dist = $driver ) =~ s/^.*:://;
my $file = "cpan_$dist.db";
my $dbh  = Module::Packaged::Generator->create_db($file);




exit;
__END__
